:root{
  --bg:#0b0f14;
  --bg2:#0f1622;
  --bar:#111826;
  --border:#233044;
  --text:#e7eef7;
  --muted:#9fb0c6;
  --btn:#152033;
  --btnBorder:#2a3a53;
  --primary:#1f3a6b;
  --primaryBorder:#2b4c8a;
  --danger:#5b1f2a;
  --dangerBorder:#7a2a37;
  --ok:#2c6b4f;
  --warn:#7a6b2a;
  --shadow: 0 12px 40px rgba(0,0,0,0.45);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
  background:var(--bg);
  color:var(--text);
}

.hidden{display:none!important;}
.muted{color:var(--muted)}
.small{font-size:12px}

.row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
.row.right{justify-content:flex-end}
.grow{flex:1}

.input{
  padding:10px 12px;
  border-radius:12px;
  border:1px solid var(--border);
  background:var(--bg2);
  color:var(--text);
  outline:none;
}
.input:focus{border-color:#36527a}
.input.full{width:100%}
.input.smallInput{width:90px}

.btn{
  padding:10px 12px;
  border-radius:12px;
  border:1px solid var(--btnBorder);
  background:var(--btn);
  color:var(--text);
  cursor:pointer;
  transition:.12s transform,.12s opacity;
}
.btn:hover{opacity:.95}
.btn:active{transform:scale(.98)}
.btn.primary{background:var(--primary);border-color:var(--primaryBorder)}
.btn.danger{background:var(--danger);border-color:var(--dangerBorder)}

hr.sep{
  border:0;
  border-top:1px solid var(--border);
  margin:14px 0;
}

.topbar{
  position:sticky;
  top:0;
  z-index:50;
  background:var(--bar);
  border-bottom:1px solid var(--border);
  padding:12px 16px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:10px;
}

.brand{display:flex;gap:10px;align-items:center}
.dot{
  width:14px;height:14px;border-radius:50%;
  background:linear-gradient(135deg,#5aa6ff,#2c6bff);
  box-shadow:0 0 0 4px rgba(90,166,255,0.12);
}
.brand-title{font-weight:900;letter-spacing:.2px}
.brand-sub{font-size:12px}

.tabs{
  position:sticky;
  top:56px;
  z-index:40;
  padding:10px 16px;
  display:flex;
  gap:8px;
  overflow:auto;
  background:var(--bg2);
  border-bottom:1px solid var(--border);
}

.tab{
  white-space:nowrap;
  padding:10px 12px;
  border-radius:12px;
  border:1px solid var(--border);
  background:transparent;
  color:var(--text);
  cursor:pointer;
}
.tab.active{background:#1b2a42;border-color:#2e466c}

.panel{padding:16px;max-width:1200px;margin:0 auto}

.section{animation:fade .12s ease}
@keyframes fade{from{opacity:.7;transform:translateY(2px)}to{opacity:1;transform:none}}

.card{
  background:var(--bg2);
  border:1px solid var(--border);
  border-radius:16px;
  padding:14px;
  box-shadow: var(--shadow);
}

.card-head{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  gap:10px;
  flex-wrap:wrap;
  margin-bottom:10px;
}

.card-title{font-weight:850}
.table-wrap{overflow:auto;border-radius:14px;border:1px solid var(--border)}

.table{width:100%;border-collapse:collapse;min-width:720px}
.table th,.table td{
  padding:10px;
  border-bottom:1px solid var(--border);
  text-align:left;
  vertical-align:middle;
}
.table th{color:#cfe0f7;font-weight:800;background:rgba(255,255,255,0.02)}
.table tr:hover td{background:rgba(255,255,255,0.02)}

.badge{
  display:inline-block;
  padding:4px 10px;
  border-radius:999px;
  border:1px solid var(--btnBorder);
  font-size:12px;
}
.badge.ok{border-color:var(--ok)}
.badge.warn{border-color:var(--warn)}
.badge.danger{border-color:var(--dangerBorder)}

.subtabs{
  display:flex;
  gap:8px;
  padding:10px;
  border:1px solid var(--border);
  border-radius:14px;
  background:rgba(0,0,0,0.12);
  margin-bottom:10px;
  overflow:auto;
}
.subtab{
  white-space:nowrap;
  padding:8px 10px;
  border-radius:12px;
  border:1px solid var(--border);
  background:transparent;
  color:var(--text);
  cursor:pointer;
}
.subtab.active{background:#1b2a42;border-color:#2e466c}

.grid2{display:grid;grid-template-columns:1.4fr .9fr;gap:14px;align-items:start}
.stack{display:grid;gap:14px}
.quick{display:grid;grid-template-columns:1fr;gap:10px}

.priceReqItem{
  border:1px solid var(--border);
  border-radius:14px;
  padding:10px;
  margin-top:10px;
  background:rgba(255,255,255,0.02);
}
.priceReqTop{display:flex;justify-content:space-between;gap:10px;align-items:center}
.priceReqTitle{font-weight:850}
.priceReqBtns{display:flex;gap:8px;flex-wrap:wrap}

/* Chat */
.gridChat{display:grid;grid-template-columns:340px 1fr;gap:14px;align-items:stretch}
.chatList #chatList{margin-top:10px;display:grid;gap:8px}
.chatItem{
  display:flex;gap:10px;align-items:center;
  padding:10px;border-radius:14px;
  border:1px solid var(--border);
  background:rgba(255,255,255,0.02);
  cursor:pointer;
}
.chatItem:hover{background:rgba(255,255,255,0.03)}
.chatItem.active{border-color:#2e466c;background:#141f31}
.chatItem .av{
  width:38px;height:38px;border-radius:12px;
  display:flex;align-items:center;justify-content:center;
  background:#142039;border:1px solid var(--border);
  font-weight:900;
}
.chatItem .meta{flex:1;min-width:0}
.chatItem .meta .t{font-weight:850}
.chatItem .meta .s{font-size:12px;color:var(--muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.chatItem .r{font-size:12px;color:var(--muted)}

.chatWindow{display:flex;flex-direction:column;min-height:520px}
.chatHead{display:flex;gap:10px;align-items:center;justify-content:space-between;margin-bottom:10px}
.avatar{
  width:42px;height:42px;border-radius:14px;
  display:flex;align-items:center;justify-content:center;
  background:#142039;border:1px solid var(--border);
  font-weight:900;
}
.chatMeta{flex:1;min-width:0}
.chatTitle{font-weight:900}
.chatSub{font-size:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}

.messages{
  flex:1;
  border:1px solid var(--border);
  border-radius:14px;
  padding:12px;
  overflow:auto;
  background:
    radial-gradient(circle at 20% 10%, rgba(90,166,255,0.07), transparent 40%),
    radial-gradient(circle at 80% 0%, rgba(44,107,255,0.06), transparent 45%),
    rgba(0,0,0,0.10);
}

.bubbleRow{display:flex;margin:8px 0}
.bubbleRow.in{justify-content:flex-start}
.bubbleRow.out{justify-content:flex-end}
.bubble{
  max-width:min(520px, 86%);
  border:1px solid var(--border);
  border-radius:16px;
  padding:10px 12px;
  background:rgba(255,255,255,0.03);
}
.bubble.out{
  background:rgba(44,107,255,0.10);
  border-color:#2e466c;
}
.bmeta{margin-top:6px;font-size:11px;color:var(--muted)}

.composer{display:flex;gap:10px;margin-top:10px}
.empty{padding:10px;text-align:center}

/* Settings */
.settings{display:grid;gap:12px}
.setting{
  display:flex;justify-content:space-between;align-items:center;gap:10px;
  padding:10px;border:1px solid var(--border);
  border-radius:14px;background:rgba(255,255,255,0.02);
}
.setting-title{font-weight:850}

/* Switch */
.switch{position:relative;display:inline-block;width:54px;height:30px}
.switch input{opacity:0;width:0;height:0}
.slider{
  position:absolute;cursor:pointer;inset:0;
  background:#142039;border:1px solid var(--border);
  transition:.2s;border-radius:999px;
}
.slider:before{
  position:absolute;content:"";
  height:24px;width:24px;left:3px;top:50%;
  transform:translateY(-50%);
  background:#dbe8ff;border-radius:999px;
  transition:.2s;
}
.switch input:checked + .slider{
  background:rgba(44,107,255,0.16);
  border-color:#2e466c;
}
.switch input:checked + .slider:before{
  transform:translate(24px,-50%);
}

/* Modal */
.modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:999;padding:16px}
.modal.show{display:flex}
.modal-overlay{position:absolute;inset:0;background:rgba(0,0,0,0.6)}
.modal-card{
  position:relative;z-index:2;
  width:420px;max-width:95%;
  background:var(--bg2);
  border:1px solid var(--border);
  border-radius:16px;
  padding:18px;
  box-shadow: var(--shadow);
}
.modal-card h3{margin:0 0 12px 0}
.modal-card .input{width:100%;margin-bottom:10px}

/* Maps placeholder */
.mapsPlaceholder{display:grid;grid-template-columns:1.3fr .7fr;gap:14px}
.mapBox{
  min-height:420px;
  border:1px dashed #2e466c;
  border-radius:16px;
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  background:rgba(44,107,255,0.05);
}
.mapSide{display:grid;gap:14px}
.miniCard{box-shadow:none}

/* Toast */
.toast{
  position:fixed;
  bottom:16px;left:50%;
  transform:translateX(-50%);
  background:rgba(15,22,34,0.96);
  border:1px solid var(--border);
  border-radius:999px;
  padding:10px 14px;
  color:var(--text);
  display:none;
  z-index:1000;
}

/* Lock screen */
.lock{
  position:fixed;inset:0;
  display:flex;align-items:center;justify-content:center;
  padding:16px;
  background:
    radial-gradient(circle at 20% 10%, rgba(90,166,255,0.10), transparent 50%),
    radial-gradient(circle at 70% 0%, rgba(44,107,255,0.08), transparent 45%),
    var(--bg);
  z-index:2000;
}
.lock-card{
  width:460px;max-width:95%;
  background:var(--bg2);
  border:1px solid var(--border);
  border-radius:18px;
  padding:18px;
  box-shadow: var(--shadow);
}
.lock-badge{
  display:inline-flex;align-items:center;gap:8px;
  padding:6px 10px;border-radius:999px;
  background:rgba(44,107,255,0.12);
  border:1px solid #2e466c;
  font-weight:850;
  margin-bottom:10px;
}
.lock h1{margin:6px 0 4px 0}
.hint{margin-top:10px}

/* Compact mode */
body.compact .panel{padding:10px}
body.compact .grid2{grid-template-columns:1fr}
body.compact .gridChat{grid-template-columns:1fr}
body.compact .table{min-width:640px}

/* Mobile */
@media (max-width: 920px){
  .grid2{grid-template-columns:1fr}
  .gridChat{grid-template-columns:1fr}
  .table{min-width:680px}
  .mapsPlaceholder{grid-template-columns:1fr}
}

